(function(a){a.fn.lightGallery=function(d){var l={mode:"slide",useCSS:true,cssEasing:"ease",easing:"linear",speed:600,addClass:"",closable:true,loop:false,auto:false,pause:4000,escKey:true,controls:true,hideControlOnEnd:false,preload:1,showAfterLoad:true,selector:null,index:false,lang:{allPhotos:"All photos"},counter:false,exThumbImage:false,thumbnail:true,showThumbByDefault:false,animateThumb:true,currentPagerPosition:"middle",thumbWidth:100,thumbMargin:5,mobileSrc:false,mobileSrcMaxWidth:640,swipeThreshold:50,enableTouch:true,enableDrag:true,vimeoColor:"CCCCCC",youtubePlayerParams:false,videoAutoplay:true,videoMaxWidth:"855px",dynamic:false,dynamicEl:[],onOpen:function(B){},onSlideBefore:function(B){},onSlideAfter:function(B){},onSlideNext:function(B){},onSlidePrev:function(B){},onBeforeClose:function(B){},onCloseAfter:function(B){}},b=a(this),e=this,n=null,g=0,s=false,c=false,m=document.createTouch!==undefined||("ontouchstart" in window)||("onmsgesturechange" in window)||navigator.msMaxTouchPoints,A,i,w,o,t,x,h,p,k,z,y,q=false,f=false,v=false;var u=a.extend(true,{},l,d);var j={init:function(){b.each(function(){var B=a(this);if(u.dynamic){n=u.dynamicEl;g=0;h=g;r.init(g)}else{if(u.selector!==null){n=a(u.selector)}else{n=B.children()}n.on("click",function(C){if(u.selector!==null){n=a(u.selector)}else{n=B.children()}C.preventDefault();C.stopPropagation();g=n.index(this);h=g;r.init(g)})}})}};var r={init:function(){s=true;this.structure();this.getWidth();this.closeSlide();this.autoStart();this.counter();this.slideTo();this.buildThumbnail();this.keyPress();if(u.index){this.slide(u.index);this.animateThumb(u.index)}else{this.slide(g);this.animateThumb(g)}if(u.enableDrag){this.touch()}if(u.enableTouch){this.enableTouch()}setTimeout(function(){A.addClass("opacity")},50)},structure:function(){a("body").append('<div id="lg-outer" class="'+u.addClass+'"><div id="lg-gallery"><div id="lg-slider"></div><a id="lg-close" class="close"></a></div></div>').addClass("light-gallery");i=a("#lg-outer");A=a("#lg-gallery");if(u.showAfterLoad===true){A.addClass("show-after-load")}w=A.find("#lg-slider");var C="";if(u.dynamic){for(var B=0;B<u.dynamicEl.length;B++){C+='<div class="lg-slide"></div>'}}else{n.each(function(){C+='<div class="lg-slide"></div>'})}w.append(C);o=A.find(".lg-slide")},closeSlide:function(){var B=this;if(u.closable){a("#lg-outer").on("click",function(C){if(a(C.target).is(".lg-slide")){e.destroy(false)}})}a("#lg-close").bind("click touchend",function(){e.destroy(false)})},getWidth:function(){var B=function(){z=a(window).width()};a(window).bind("resize.lightGallery",B())},doCss:function(){var B=function(){var E=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"];var C=document.documentElement;for(var D=0;D<E.length;D++){if(E[D] in C.style){return true}}};if(u.useCSS&&B()){return true}return false},enableTouch:function(){var D=this;if(m){var C={},B={};a("body").on("touchstart.lightGallery",function(E){B=E.originalEvent.targetTouches[0];C.pageX=E.originalEvent.targetTouches[0].pageX;C.pageY=E.originalEvent.targetTouches[0].pageY});a("body").on("touchmove.lightGallery",function(E){var F=E.originalEvent;B=F.targetTouches[0];E.preventDefault()});a("body").on("touchend.lightGallery",function(F){var G=B.pageX-C.pageX,E=u.swipeThreshold;if(G>=E){D.prevSlide();clearInterval(y)}else{if(G<=-E){D.nextSlide();clearInterval(y)}}})}},touch:function(){var D,B;var C=this;a(".light-gallery").bind("mousedown",function(E){E.stopPropagation();E.preventDefault();D=E.pageX});a(".light-gallery").bind("mouseup",function(E){E.stopPropagation();E.preventDefault();B=E.pageX;if(B-D>20){C.prevSlide()}else{if(D-B>20){C.nextSlide()}}})},isVideo:function(F,C){var D=F.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i);var B=F.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i);var E=false;if(u.dynamic){if(u.dynamicEl[C].iframe=="true"){E=true}}else{if(n.eq(C).attr("data-iframe")=="true"){E=true}}if(D||B||E){return true}},loadVideo:function(H,E){var D=H.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i);var C=H.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i);var G="";var B="";if(D){if(u.videoAutoplay===true&&c===false){B="?autoplay=1&rel=0&wmode=opaque"}else{B="?wmode=opaque"}if(u.youtubePlayerParams){var F=a.param(u.youtubePlayerParams);B=B+"&"+F}G='<iframe class="object" width="560" height="315" src="//www.youtube.com/embed/'+D[1]+B+'" frameborder="0" allowfullscreen></iframe>'}else{if(C){if(u.videoAutoplay===true&&c===false){B="autoplay=1&amp;"}else{B=""}G='<iframe class="object" id="video'+E+'" width="560" height="315"  src="http://player.vimeo.com/video/'+C[1]+"?"+B+"byline=0&amp;portrait=0&amp;color="+u.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}else{G='<iframe class="object" frameborder="0" src="'+H+'"  allowfullscreen="true"></iframe>'}}return'<div class="video-cont" style="max-width:'+u.videoMaxWidth+' !important;"><div class="video">'+G+"</div></div>"},addHtml:function(B){var C=null;if(u.dynamic){C=u.dynamicEl[B]["sub-html"]}else{C=n.eq(B).attr("data-sub-html")}if(typeof C!=="undefined"&&C!==null){var D=C.substring(0,1);if(D=="."||D=="#"){C=a(C).html()}else{C=C}o.eq(B).append(C)}},preload:function(C){var D=C;for(var B=0;B<=u.preload;B++){if(B>=n.length-C){break}this.loadContent(D+B,true)}for(var E=0;E<=u.preload;E++){if(D-E<0){break}this.loadContent(D-E,true)}},loadObj:function(C,B){var D=this;o.eq(B).find(".object").on("load error",function(){o.eq(B).addClass("complete")});if(C===false){if(!o.eq(B).hasClass("complete")){o.eq(B).find(".object").on("load error",function(){D.preload(B)})}else{D.preload(B)}}},loadContent:function(D,I){var G=this;var E,C,B=n.length-D;var H;if(u.preload>n.length){u.preload=n.length}if(u.mobileSrc===true&&z<=u.mobileSrcMaxWidth){if(u.dynamic){H=u.dynamicEl[D].mobileSrc}else{H=n.eq(D).attr("data-responsive-src")}}if(!H){if(u.dynamic){H=u.dynamicEl[D].src}else{H=n.eq(D).attr("data-src")}}var F=0;if(I===true){F=u.speed+400}if(typeof H!=="undefined"&&H!==""){if(!G.isVideo(H,D)){setTimeout(function(){if(!o.eq(D).hasClass("loaded")){o.eq(D).prepend('<img class="object" src="'+H+'" />');G.addHtml(D);o.eq(D).addClass("loaded")}G.loadObj(I,D)},F)}else{setTimeout(function(){if(!o.eq(D).hasClass("loaded")){o.eq(D).prepend(G.loadVideo(H,D));G.addHtml(D);o.eq(D).addClass("loaded");if(u.auto&&u.videoAutoplay===true){clearInterval(y)}}G.loadObj(I,D)},F)}}else{setTimeout(function(){if(!o.eq(D).hasClass("loaded")){var J=null;if(u.dynamic){J=u.dynamicEl[D].html}else{J=n.eq(D).attr("data-html")}if(typeof J!=="undefined"&&J!==null){var K=J.substring(0,1);if(K=="."||K=="#"){J=a(J).html()}else{J=J}}if(typeof J!=="undefined"&&J!==null){o.eq(D).append('<div class="video-cont" style="max-width:'+u.videoMaxWidth+' !important;"><div class="video">'+J+"</div></div>")}G.addHtml(D);o.eq(D).addClass("loaded complete");if(u.auto&&u.videoAutoplay===true){clearInterval(y)}}G.loadObj(I,D)},F)}},counter:function(){if(u.counter===true){var B=a("#lg-slider > div").length;A.append("<div id='lg-counter'><span id='lg-counter-current'></span> / <span id='lg-counter-all'>"+B+"</span></div>")}},buildThumbnail:function(){if(u.thumbnail===true&&n.length>1){var H=this,G="";if(!u.showThumbByDefault){G='<span class="close ib"><i class="bUi-iCn-rMv-16" aria-hidden="true"></i></span>'}A.append('<div class="thumb-cont"><div class="thumb-info">'+G+'</div><div class="thumb-inner"></div></div>');p=A.find(".thumb-cont");t.after('<a class="cl-thumb"></a>');t.parent().addClass("has-thumb");A.find(".cl-thumb").bind("click touchend",function(){A.addClass("open");if(H.doCss()&&u.mode==="slide"){o.eq(g).prevAll().removeClass("next-slide").addClass("prev-slide");o.eq(g).nextAll().removeClass("prev-slide").addClass("next-slide")}});A.find(".thumb-cont .close").bind("click touchend",function(){A.removeClass("open")});var F=A.find(".thumb-info");var B=A.find(".thumb-inner");var D="";var I;if(u.dynamic){for(var C=0;C<u.dynamicEl.length;C++){I=u.dynamicEl[C].thumb;D+='<div class="thumb"><img src="'+I+'" /></div>'}}else{n.each(function(){if(u.exThumbImage===false||typeof a(this).attr(u.exThumbImage)=="undefined"||a(this).attr(u.exThumbImage)===null){I=a(this).find("img").attr("src")}else{I=a(this).attr(u.exThumbImage)}D+='<div class="thumb"><img src="'+I+'" /></div>'})}B.append(D);k=B.find(".thumb");k.css({"margin-right":u.thumbMargin+"px",width:u.thumbWidth+"px"});if(u.animateThumb===true){var E=(n.length*(u.thumbWidth+u.thumbMargin));A.find(".thumb-inner").css({width:E+"px",position:"relative","transition-duration":u.speed+"ms"})}k.bind("click touchend",function(){q=true;var J=a(this).index();k.removeClass("active");a(this).addClass("active");H.slide(J);H.animateThumb(J);clearInterval(y)});F.prepend('<span class="ib count">'+u.lang.allPhotos+" ("+k.length+")</span>");if(u.showThumbByDefault){A.addClass("open")}}},animateThumb:function(C){if(u.animateThumb===true){var D=A.find(".thumb-cont").width();var B;switch(u.currentPagerPosition){case"left":B=0;break;case"middle":B=(D/2)-(u.thumbWidth/2);break;case"right":B=D-u.thumbWidth}var F=((u.thumbWidth+u.thumbMargin)*C-1)-B;var E=(n.length*(u.thumbWidth+u.thumbMargin));if(F>(E-D)){F=E-D}if(F<0){F=0}if(this.doCss()){A.find(".thumb-inner").css("transform","translate3d(-"+F+"px, 0px, 0px)")}else{A.find(".thumb-inner").animate({left:-F+"px"},u.speed)}}},slideTo:function(){var B=this;if(u.controls===true&&n.length>1){A.append('<div id="lg-action"><a id="lg-prev"></a><a id="lg-next"></a></div>');t=A.find("#lg-prev");x=A.find("#lg-next");t.bind("click",function(){B.prevSlide();clearInterval(y)});x.bind("click",function(){B.nextSlide();clearInterval(y)})}},autoStart:function(){var B=this;if(u.auto===true){y=setInterval(function(){if(g+1<n.length){g=g}else{g=-1}g++;B.slide(g)},u.pause)}},keyPress:function(){var B=this;a(window).bind("keyup.lightGallery",function(C){C.preventDefault();C.stopPropagation();if(C.keyCode===37){B.prevSlide();clearInterval(y)}if(C.keyCode===38&&u.thumbnail===true&&n.length>1){if(!A.hasClass("open")){if(B.doCss()&&u.mode==="slide"){o.eq(g).prevAll().removeClass("next-slide").addClass("prev-slide");o.eq(g).nextAll().removeClass("prev-slide").addClass("next-slide")}A.addClass("open")}}else{if(C.keyCode===39){B.nextSlide();clearInterval(y)}}if(C.keyCode===40&&u.thumbnail===true&&n.length>1&&!u.showThumbByDefault){if(A.hasClass("open")){A.removeClass("open")}}else{if(u.escKey===true&&C.keyCode===27){if(!u.showThumbByDefault&&A.hasClass("open")){A.removeClass("open")}else{e.destroy(false)}}}})},nextSlide:function(){var B=this;g=o.index(o.eq(h));if(g+1<n.length){g++;B.slide(g)}else{if(u.loop){g=0;B.slide(g)}else{if(u.thumbnail===true&&n.length>1&&!u.showThumbByDefault){A.addClass("open")}else{o.eq(g).find(".object").addClass("right-end");setTimeout(function(){o.find(".object").removeClass("right-end")},400)}}}B.animateThumb(g);u.onSlideNext.call(this,e)},prevSlide:function(){var B=this;g=o.index(o.eq(h));if(g>0){g--;B.slide(g)}else{if(u.loop){g=n.length-1;B.slide(g)}else{if(u.thumbnail===true&&n.length>1&&!u.showThumbByDefault){A.addClass("open")}else{o.eq(g).find(".object").addClass("left-end");setTimeout(function(){o.find(".object").removeClass("left-end")},400)}}}B.animateThumb(g);u.onSlidePrev.call(this,e)},slide:function(D){var E=this;if(c){setTimeout(function(){E.loadContent(D,false)},u.speed+400);if(!w.hasClass("on")){w.addClass("on")}if(this.doCss()&&u.speed!==""){if(!w.hasClass("speed")){w.addClass("speed")}if(v===false){w.css("transition-duration",u.speed+"ms");v=true}}if(this.doCss()&&u.cssEasing!==""){if(!w.hasClass("timing")){w.addClass("timing")}if(f===false){w.css("transition-timing-function",u.cssEasing);f=true}}u.onSlideBefore.call(this,e)}else{E.loadContent(D,false)}if(u.mode==="slide"){var C=navigator.userAgent.match(/iPad/i)!==null;if(this.doCss()&&!w.hasClass("slide")&&!C){w.addClass("slide")}else{if(this.doCss()&&!w.hasClass("use-left")&&C){w.addClass("use-left")}}if(!this.doCss()&&!c){w.css({left:(-D*100)+"%"})}else{if(!this.doCss()&&c){w.animate({left:(-D*100)+"%"},u.speed,u.easing)}}}else{if(u.mode==="fade"){if(this.doCss()&&!w.hasClass("fade-m")){w.addClass("fade-m")}else{if(!this.doCss()&&!w.hasClass("animate")){w.addClass("animate")}}if(!this.doCss()&&!c){o.fadeOut(100);o.eq(D).fadeIn(100)}else{if(!this.doCss()&&c){o.eq(h).fadeOut(u.speed,u.easing);o.eq(D).fadeIn(u.speed,u.easing)}}}}if(D+1>=n.length&&u.auto&&u.loop===false){clearInterval(y)}o.eq(h).removeClass("current");o.eq(D).addClass("current");if(this.doCss()&&u.mode==="slide"){if(q===false){a(".prev-slide").removeClass("prev-slide");a(".next-slide").removeClass("next-slide");o.eq(D-1).addClass("prev-slide");o.eq(D+1).addClass("next-slide")}else{o.eq(D).prevAll().removeClass("next-slide").addClass("prev-slide");o.eq(D).nextAll().removeClass("prev-slide").addClass("next-slide")}}if(u.thumbnail===true&&n.length>1){k.removeClass("active");k.eq(D).addClass("active")}if(u.controls&&u.hideControlOnEnd&&u.loop===false&&n.length>1){var B=n.length;B=parseInt(B)-1;if(D===0){t.addClass("disabled");x.removeClass("disabled")}else{if(D===B){t.removeClass("disabled");x.addClass("disabled")}else{t.add(x).removeClass("disabled")}}}h=D;c===false?u.onOpen.call(this,e):u.onSlideAfter.call(this,e);setTimeout(function(){c=true});q=false;if(u.counter){a("#lg-counter-current").text(D+1)}a(window).bind("resize.lightGallery",function(){setTimeout(function(){E.animateThumb(D)},200)})}};e.isActive=function(){if(s===true){return true}else{return false}};e.destroy=function(C){s=false;C=typeof C!=="undefined"?false:true;u.onBeforeClose.call(this,e);var B=c;c=false;f=false;v=false;q=false;clearInterval(y);if(C===true){n.off("click touch touchstart")}a(".light-gallery").off("mousedown mouseup");a("body").off("touchstart.lightGallery touchmove.lightGallery touchend.lightGallery");a(window).off("resize.lightGallery keyup.lightGallery");if(B===true){A.addClass("fade-m");setTimeout(function(){i.remove();a("body").removeClass("light-gallery")},500)}u.onCloseAfter.call(this,e)};j.init();return this}}(jQuery));